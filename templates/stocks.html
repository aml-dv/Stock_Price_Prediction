<!DOCTYPE html>
<html>
<head>
    <title>Nifty 50 Stocks</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .card-img-top { height: 120px; object-fit: contain; padding: 15px; }
        .stock-card { transition: transform 0.2s; min-height: 280px; cursor: pointer; }
        .stock-card:hover { transform: translateY(-5px); box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .code-name { font-weight: 600; color: #2c3e50; }
        .company-name { font-size: 0.9em; color: #7f8c8d; }
    </style>
</head>
<body class="bg-light">
    <div class="container py-4">
        <h1 class="text-center mb-4">Nifty 50 Constituents</h1>
        <div class="row g-4">
            {% for stock in stocks %}
            <div class="col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2">
                <div class="card h-100 stock-card shadow-sm" onclick="submitForm('{{ stock.code }}')">
                    <img src="{{ url_for('static', filename=stock.logo) }}"
                         class="card-img-top"
                         alt="{{ stock.name }}"
                         onerror="this.onerror=null;this.src='https://via.placeholder.com/150?text=Logo+Missing'">
                    <div class="card-body text-center">
                        <div class="code-name mb-2">{{ stock.code }}</div>
                        <div class="company-name">{{ stock.name }}</div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        <form id="predictionForm" method="post" action="/predict" style="display: none;">
            <input type="hidden" name="stock_code" id="stockCode">
            <input type="hidden" name="forecast_days" value="70">
        </form>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        function submitForm(code) {
            document.getElementById('stockCode').value = code;
            document.getElementById('predictionForm').submit();
        }
    </script>
</body>
</html>